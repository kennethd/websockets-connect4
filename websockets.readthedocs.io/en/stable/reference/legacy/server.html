<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Server (legacy asyncio)" />
<meta property="og:type" content="website" />
<meta property="og:url" content="reference/legacy/server.html" />
<meta property="og:site_name" content="websockets" />
<meta property="og:description" content="Starting a server: Stopping a server: Using a connection: Broadcast: Basic authentication: websockets supports HTTP Basic Authentication according to RFC 7235 and RFC 7617." />
<meta name="description" content="Starting a server: Stopping a server: Using a connection: Broadcast: Basic authentication: websockets supports HTTP Basic Authentication according to RFC 7235 and RFC 7617." />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Client (legacy asyncio)" href="client.html" /><link rel="prev" title="Client (Sans-I/O)" href="../sansio/client.html" />

    <link rel="shortcut icon" href="../../_static/favicon.ico"/><!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>Server (legacy asyncio) - websockets 14.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css%3Fv=a746c00c.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css%3Fv=354aac6f.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css%3Fv=76b2166b.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css%3Fv=4c969af8.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css%3Fv=302659d7.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #306998;
  --color-brand-content: #0b487a;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #ffd43bcc;
  --color-brand-content: #ffd43bd9;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #ffd43bcc;
  --color-brand-content: #ffd43bd9;
  
      }
    }
  }
</style><script async type="text/javascript" src="../../../../_/static/javascript/readthedocs-addons.js"></script><meta name="readthedocs-project-slug" content="websockets" /><meta name="readthedocs-version-slug" content="stable" /><meta name="readthedocs-resolver-filename" content="/reference/legacy/server.html" /><meta name="readthedocs-http-status" content="200" /></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="server.html#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">websockets 14.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/websockets.svg" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../intro/index.html">Getting started</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Getting started</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../intro/tutorial1.html">Part 1 - Send &amp; receive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intro/tutorial2.html">Part 2 - Route &amp; broadcast</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intro/tutorial3.html">Part 3 - Deploy to the web</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../howto/index.html">How-to guides</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of How-to guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../howto/quickstart.html">Quick start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../howto/upgrade.html">Upgrade to the new <code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code> implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../howto/cheatsheet.html">Cheat sheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../howto/patterns.html">Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../howto/autoreload.html">Reload on code changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../howto/django.html">Integrate with Django</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../howto/extensions.html">Write an extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../howto/render.html">Deploy to Render</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../howto/fly.html">Deploy to Fly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../howto/heroku.html">Deploy to Heroku</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../howto/kubernetes.html">Deploy to Kubernetes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../howto/supervisor.html">Deploy with Supervisor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../howto/nginx.html">Deploy behind nginx</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../howto/haproxy.html">Deploy behind HAProxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../howto/sansio.html">Integrate the Sans-I/O layer</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../faq/index.html">Frequently asked questions</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Frequently asked questions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../faq/server.html">Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq/client.html">Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq/common.html">Both sides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq/asyncio.html">Using asyncio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq/misc.html">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">API reference</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of API reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../features.html">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../asyncio/server.html">Server (new <code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../asyncio/client.html">Client (new <code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sync/server.html">Server (<code class="xref py py-mod docutils literal notranslate"><span class="pre">threading</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sync/client.html">Client (<code class="xref py py-mod docutils literal notranslate"><span class="pre">threading</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sansio/server.html">Server (Sans-I/O)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sansio/client.html">Client (Sans-I/O)</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="server.html#">Server (legacy <code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="client.html">Client (legacy <code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extensions.html">Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastructures.html">Data structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exceptions.html">Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../types.html">Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../variables.html">Environment variables</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../topics/index.html">Topic guides</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Topic guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../topics/deployment.html">Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../topics/logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../topics/authentication.html">Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../topics/broadcast.html">Broadcasting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../topics/compression.html">Compression</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../topics/keepalive.html">Keepalive and latency</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../topics/memory.html">Memory and buffers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../topics/security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../topics/performance.html">Performance</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../project/index.html">About websockets</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of About websockets</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../project/changelog.html">Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../project/contributing.html">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../project/sponsoring.html">Sponsoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../project/tidelift.html">For enterprise</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../project/support.html">Getting support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../project/license.html">License</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="server.html#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          

<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="server-legacy-asyncio">
<h1>Server (legacy <a class="reference external" href="https://docs.python.org/3/library/asyncio.html#module-asyncio" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code></a>)<a class="headerlink" href="server.html#server-legacy-asyncio" title="Link to this heading">¶</a></h1>
<div class="caution admonition">
<p class="admonition-title">The legacy <a class="reference external" href="https://docs.python.org/3/library/asyncio.html#module-asyncio" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code></a> implementation is deprecated.</p>
<p>The <a class="reference internal" href="../../howto/upgrade.html"><span class="doc">upgrade guide</span></a> provides complete instructions
to migrate your application.</p>
</div>
<section id="starting-a-server">
<span id="module-websockets.legacy.server"></span><h2>Starting a server<a class="headerlink" href="server.html#starting-a-server" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="websockets.legacy.server.serve">
<em class="property"><span class="pre">await</span> </em><span class="sig-prename descclassname"><span class="pre">websockets.legacy.server.</span></span><span class="sig-name descname"><span class="pre">serve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ws_handler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compression</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'deflate'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extensions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subprotocols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Python/x.y.z</span> <span class="pre">websockets/X.Y'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">process_request</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">select_subprotocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">open_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ping_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ping_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2**20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_queue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2**5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2**16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2**16</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwds</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/server.py#L882-L1128"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.serve" title="Link to this definition">¶</a></dt>
<dd><p>Start a WebSocket server listening on <code class="docutils literal notranslate"><span class="pre">host</span></code> and <code class="docutils literal notranslate"><span class="pre">port</span></code>.</p>
<p>Whenever a client connects, the server creates a
<a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol" title="websockets.legacy.server.WebSocketServerProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketServerProtocol</span></code></a>, performs the opening handshake, and
delegates to the connection handler, <code class="docutils literal notranslate"><span class="pre">ws_handler</span></code>.</p>
<p>The handler receives the <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol" title="websockets.legacy.server.WebSocketServerProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketServerProtocol</span></code></a> and uses it to
send and receive messages.</p>
<p>Once the handler completes, either normally or with an exception, the
server performs the closing handshake and closes the connection.</p>
<p>Awaiting <a class="reference internal" href="server.html#websockets.legacy.server.serve" title="websockets.legacy.server.serve"><code class="xref py py-func docutils literal notranslate"><span class="pre">serve()</span></code></a> yields a <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServer" title="websockets.legacy.server.WebSocketServer"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketServer</span></code></a>. This object
provides a <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServer.close" title="websockets.legacy.server.WebSocketServer.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> method to shut down the server:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># set this future to exit the server</span>
<span class="n">stop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span><span class="o">.</span><span class="n">create_future</span><span class="p">()</span>

<span class="n">server</span> <span class="o">=</span> <span class="k">await</span> <span class="n">serve</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="k">await</span> <span class="n">stop</span>
<span class="n">server</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="k">await</span> <span class="n">server</span><span class="o">.</span><span class="n">wait_closed</span><span class="p">()</span>
</pre></div>
</div>
<p><a class="reference internal" href="server.html#websockets.legacy.server.serve" title="websockets.legacy.server.serve"><code class="xref py py-func docutils literal notranslate"><span class="pre">serve()</span></code></a> can be used as an asynchronous context manager. Then, the
server is shut down automatically when exiting the context:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># set this future to exit the server</span>
<span class="n">stop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span><span class="o">.</span><span class="n">create_future</span><span class="p">()</span>

<span class="k">async</span> <span class="k">with</span> <span class="n">serve</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
    <span class="k">await</span> <span class="n">stop</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ws_handler</strong> (<em>Callable</em><em>[</em><em>[</em><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol" title="websockets.legacy.server.WebSocketServerProtocol"><em>WebSocketServerProtocol</em></a><em>]</em><em>, </em><em>Awaitable</em><em>[</em><em>Any</em><em>]</em><em>] </em><em>| </em><em>Callable</em><em>[</em><em>[</em><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol" title="websockets.legacy.server.WebSocketServerProtocol"><em>WebSocketServerProtocol</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em><em>, </em><em>Awaitable</em><em>[</em><em>Any</em><em>]</em><em>]</em>) – Connection handler. It receives the WebSocket connection,
which is a <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol" title="websockets.legacy.server.WebSocketServerProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketServerProtocol</span></code></a>, in argument.</p></li>
<li><p><strong>host</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>Sequence</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – Network interfaces the server binds to.
See <a class="reference external" href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.loop.create_server" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_server()</span></code></a> for details.</p></li>
<li><p><strong>port</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – TCP port the server listens on.
See <a class="reference external" href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.loop.create_server" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_server()</span></code></a> for details.</p></li>
<li><p><strong>create_protocol</strong> (<em>Callable</em><em>[</em><em>...</em><em>, </em><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol" title="websockets.legacy.server.WebSocketServerProtocol"><em>WebSocketServerProtocol</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – Factory for the <a class="reference external" href="https://docs.python.org/3/library/asyncio-protocol.html#asyncio.Protocol" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Protocol</span></code></a> managing
the connection. It defaults to <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol" title="websockets.legacy.server.WebSocketServerProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketServerProtocol</span></code></a>.
Set it to a wrapper or a subclass to customize connection handling.</p></li>
<li><p><strong>logger</strong> (<a class="reference internal" href="../types.html#websockets.typing.LoggerLike" title="websockets.typing.LoggerLike"><em>LoggerLike</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – Logger for this server.
It defaults to <code class="docutils literal notranslate"><span class="pre">logging.getLogger(&quot;websockets.server&quot;)</span></code>.
See the <a class="reference internal" href="../../topics/logging.html"><span class="doc">logging guide</span></a> for details.</p></li>
<li><p><strong>compression</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – The “permessage-deflate” extension is enabled by default.
Set <code class="docutils literal notranslate"><span class="pre">compression</span></code> to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> to disable it. See the
<a class="reference internal" href="../../topics/compression.html"><span class="doc">compression guide</span></a> for details.</p></li>
<li><p><strong>origins</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="../types.html#websockets.typing.Origin" title="websockets.typing.Origin"><em>Origin</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – Acceptable values of the <code class="docutils literal notranslate"><span class="pre">Origin</span></code> header, for defending
against Cross-Site WebSocket Hijacking attacks. Include <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>
in the list if the lack of an origin is acceptable.</p></li>
<li><p><strong>extensions</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="../extensions.html#websockets.extensions.ServerExtensionFactory" title="websockets.extensions.ServerExtensionFactory"><em>ServerExtensionFactory</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – List of supported extensions, in order in which they
should be negotiated and run.</p></li>
<li><p><strong>subprotocols</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="../types.html#websockets.typing.Subprotocol" title="websockets.typing.Subprotocol"><em>Subprotocol</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – List of supported subprotocols, in order of decreasing
preference.</p></li>
<li><p><strong>extra_headers</strong> (<a class="reference internal" href="../types.html#websockets.datastructures.HeadersLike" title="websockets.datastructures.HeadersLike"><em>HeadersLike</em></a><em> | </em><em>Callable</em><em>[</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><a class="reference internal" href="../datastructures.html#websockets.datastructures.Headers" title="websockets.datastructures.Headers"><em>Headers</em></a><em>] </em><em>| </em><a class="reference internal" href="../types.html#websockets.datastructures.HeadersLike" title="websockets.datastructures.HeadersLike"><em>HeadersLike</em></a><em>]</em>) – Arbitrary HTTP headers to add to the response. This can be
a <a class="reference internal" href="../types.html#websockets.datastructures.HeadersLike" title="websockets.datastructures.HeadersLike"><code class="xref py py-data docutils literal notranslate"><span class="pre">HeadersLike</span></code></a> or a callable
taking the request path and headers in arguments and returning
a <a class="reference internal" href="../types.html#websockets.datastructures.HeadersLike" title="websockets.datastructures.HeadersLike"><code class="xref py py-data docutils literal notranslate"><span class="pre">HeadersLike</span></code></a>.</p></li>
<li><p><strong>server_header</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – Value of  the <code class="docutils literal notranslate"><span class="pre">Server</span></code> response header.
It defaults to <code class="docutils literal notranslate"><span class="pre">&quot;Python/x.y.z</span> <span class="pre">websockets/X.Y&quot;</span></code>.
Setting it to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> removes the header.</p></li>
<li><p><strong>process_request</strong> (<em>Callable</em><em>[</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><a class="reference internal" href="../datastructures.html#websockets.datastructures.Headers" title="websockets.datastructures.Headers"><em>Headers</em></a><em>]</em><em>,             </em><em>Awaitable</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a><em>[</em><a class="reference internal" href="../types.html#websockets.typing.StatusLike" title="websockets.typing.StatusLike"><em>StatusLike</em></a><em>, </em><a class="reference internal" href="../types.html#websockets.datastructures.HeadersLike" title="websockets.datastructures.HeadersLike"><em>HeadersLike</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><em>bytes</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a><em>]</em><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – Intercept HTTP request before the opening handshake.
See <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.process_request" title="websockets.legacy.server.WebSocketServerProtocol.process_request"><code class="xref py py-meth docutils literal notranslate"><span class="pre">process_request()</span></code></a> for details.</p></li>
<li><p><strong>select_subprotocol</strong> (<em>Callable</em><em>[</em><em>[</em><em>Sequence</em><em>[</em><a class="reference internal" href="../types.html#websockets.typing.Subprotocol" title="websockets.typing.Subprotocol"><em>Subprotocol</em></a><em>]</em><em>, </em><em>Sequence</em><em>[</em><a class="reference internal" href="../types.html#websockets.typing.Subprotocol" title="websockets.typing.Subprotocol"><em>Subprotocol</em></a><em>]</em><em>]</em><em>, </em><a class="reference internal" href="../types.html#websockets.typing.Subprotocol" title="websockets.typing.Subprotocol"><em>Subprotocol</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – Select a subprotocol supported by the client.
See <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.select_subprotocol" title="websockets.legacy.server.WebSocketServerProtocol.select_subprotocol"><code class="xref py py-meth docutils literal notranslate"><span class="pre">select_subprotocol()</span></code></a> for details.</p></li>
<li><p><strong>open_timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – Timeout for opening connections in seconds.
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> disables the timeout.</p></li>
</ul>
</dd>
</dl>
<p>See <a class="reference internal" href="common.html#websockets.legacy.protocol.WebSocketCommonProtocol" title="websockets.legacy.protocol.WebSocketCommonProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketCommonProtocol</span></code></a> for the
documentation of <code class="docutils literal notranslate"><span class="pre">ping_interval</span></code>, <code class="docutils literal notranslate"><span class="pre">ping_timeout</span></code>, <code class="docutils literal notranslate"><span class="pre">close_timeout</span></code>,
<code class="docutils literal notranslate"><span class="pre">max_size</span></code>, <code class="docutils literal notranslate"><span class="pre">max_queue</span></code>, <code class="docutils literal notranslate"><span class="pre">read_limit</span></code>, and <code class="docutils literal notranslate"><span class="pre">write_limit</span></code>.</p>
<p>Any other keyword arguments are passed the event loop’s
<a class="reference external" href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.loop.create_server" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_server()</span></code></a> method.</p>
<p>For example:</p>
<ul class="simple">
<li><p>You can set <code class="docutils literal notranslate"><span class="pre">ssl</span></code> to a <a class="reference external" href="https://docs.python.org/3/library/ssl.html#ssl.SSLContext" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSLContext</span></code></a> to enable TLS.</p></li>
<li><p>You can set <code class="docutils literal notranslate"><span class="pre">sock</span></code> to a <a class="reference external" href="https://docs.python.org/3/library/socket.html#socket.socket" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">socket</span></code></a> that you created
outside of websockets.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>WebSocket server.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="websockets.legacy.server.unix_serve">
<em class="property"><span class="pre">await</span> </em><span class="sig-prename descclassname"><span class="pre">websockets.legacy.server.</span></span><span class="sig-name descname"><span class="pre">unix_serve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ws_handler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compression</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'deflate'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extensions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subprotocols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Python/x.y.z</span> <span class="pre">websockets/X.Y'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">process_request</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">select_subprotocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">open_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ping_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ping_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2**20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_queue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2**5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2**16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2**16</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwds</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/server.py#L1134-L1158"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.unix_serve" title="Link to this definition">¶</a></dt>
<dd><p>Start a WebSocket server listening on a Unix socket.</p>
<p>This function is identical to <a class="reference internal" href="server.html#websockets.legacy.server.serve" title="websockets.legacy.server.serve"><code class="xref py py-func docutils literal notranslate"><span class="pre">serve()</span></code></a>, except the <code class="docutils literal notranslate"><span class="pre">host</span></code> and
<code class="docutils literal notranslate"><span class="pre">port</span></code> arguments are replaced by <code class="docutils literal notranslate"><span class="pre">path</span></code>. It is only available on Unix.</p>
<p>Unrecognized keyword arguments are passed the event loop’s
<a class="reference external" href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.loop.create_unix_server" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_unix_server()</span></code></a> method.</p>
<p>It’s useful for deploying a server behind a reverse proxy such as nginx.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – File system path to the Unix socket.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="stopping-a-server">
<h2>Stopping a server<a class="headerlink" href="server.html#stopping-a-server" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">websockets.legacy.server.</span></span><span class="sig-name descname"><span class="pre">WebSocketServer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/server.py#L649-L879"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServer" title="Link to this definition">¶</a></dt>
<dd><p>WebSocket server returned by <a class="reference internal" href="server.html#websockets.legacy.server.serve" title="websockets.legacy.server.serve"><code class="xref py py-func docutils literal notranslate"><span class="pre">serve()</span></code></a>.</p>
<p>This class mirrors the API of <a class="reference external" href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.Server" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Server</span></code></a>.</p>
<p>It keeps track of WebSocket connections in order to close them properly
when shutting down.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>logger</strong> (<a class="reference internal" href="../types.html#websockets.typing.LoggerLike" title="websockets.typing.LoggerLike"><em>LoggerLike</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – Logger for this server.
It defaults to <code class="docutils literal notranslate"><span class="pre">logging.getLogger(&quot;websockets.server&quot;)</span></code>.
See the <a class="reference internal" href="../../topics/logging.html"><span class="doc">logging guide</span></a> for details.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServer.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">close_connections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/server.py#L725-L746"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServer.close" title="Link to this definition">¶</a></dt>
<dd><p>Close the server.</p>
<ul class="simple">
<li><p>Close the underlying <a class="reference external" href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.Server" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Server</span></code></a>.</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">close_connections</span></code> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, which is the default,
close existing connections. Specifically:</p>
<ul>
<li><p>Reject opening WebSocket connections with an HTTP 503 (service
unavailable) error. This happens when the server accepted the TCP
connection but didn’t complete the opening handshake before closing.</p></li>
<li><p>Close open WebSocket connections with close code 1001 (going away).</p></li>
</ul>
</li>
<li><p>Wait until all connection handlers terminate.</p></li>
</ul>
<p><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServer.close" title="websockets.legacy.server.WebSocketServer.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> is idempotent.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServer.wait_closed">
<em class="property"><span class="pre">await</span> </em><span class="sig-name descname"><span class="pre">wait_closed</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/server.py#L794-L813"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServer.wait_closed" title="Link to this definition">¶</a></dt>
<dd><p>Wait until the server is closed.</p>
<p>When <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServer.wait_closed" title="websockets.legacy.server.WebSocketServer.wait_closed"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wait_closed()</span></code></a> returns, all TCP connections are closed and
all connection handlers have returned.</p>
<p>To ensure a fast shutdown, a connection handler should always be
awaiting at least one of:</p>
<ul class="simple">
<li><p><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.recv" title="websockets.legacy.server.WebSocketServerProtocol.recv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">recv()</span></code></a>: when the connection is closed,
it raises <a class="reference internal" href="../exceptions.html#websockets.exceptions.ConnectionClosedOK" title="websockets.exceptions.ConnectionClosedOK"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ConnectionClosedOK</span></code></a>;</p></li>
<li><p><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.wait_closed" title="websockets.legacy.server.WebSocketServerProtocol.wait_closed"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wait_closed()</span></code></a>: when the connection is
closed, it returns.</p></li>
</ul>
<p>Then the connection handler is immediately notified of the shutdown;
it can clean up and exit.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServer.get_loop">
<span class="sig-name descname"><span class="pre">get_loop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/server.py#L815-L820"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServer.get_loop" title="Link to this definition">¶</a></dt>
<dd><p>See <a class="reference external" href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.Server.get_loop" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.Server.get_loop()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServer.is_serving">
<span class="sig-name descname"><span class="pre">is_serving</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/server.py#L822-L827"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServer.is_serving" title="Link to this definition">¶</a></dt>
<dd><p>See <a class="reference external" href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.Server.is_serving" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.Server.is_serving()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServer.start_serving">
<em class="property"><span class="pre">await</span> </em><span class="sig-name descname"><span class="pre">start_serving</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/server.py#L829-L841"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServer.start_serving" title="Link to this definition">¶</a></dt>
<dd><p>See <a class="reference external" href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.Server.start_serving" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.Server.start_serving()</span></code></a>.</p>
<p>Typical use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">server</span> <span class="o">=</span> <span class="k">await</span> <span class="n">serve</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">start_serving</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># perform additional setup here...</span>
<span class="c1"># ... then start the server</span>
<span class="k">await</span> <span class="n">server</span><span class="o">.</span><span class="n">start_serving</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServer.serve_forever">
<em class="property"><span class="pre">await</span> </em><span class="sig-name descname"><span class="pre">serve_forever</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/server.py#L843-L859"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServer.serve_forever" title="Link to this definition">¶</a></dt>
<dd><p>See <a class="reference external" href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.Server.serve_forever" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.Server.serve_forever()</span></code></a>.</p>
<p>Typical use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">server</span> <span class="o">=</span> <span class="k">await</span> <span class="n">serve</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="c1"># this coroutine doesn&#39;t return</span>
<span class="c1"># canceling it stops the server</span>
<span class="k">await</span> <span class="n">server</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
</pre></div>
</div>
<p>This is an alternative to using <a class="reference internal" href="server.html#websockets.legacy.server.serve" title="websockets.legacy.server.serve"><code class="xref py py-func docutils literal notranslate"><span class="pre">serve()</span></code></a> as an asynchronous context
manager. Shutdown is triggered by canceling <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServer.serve_forever" title="websockets.legacy.server.WebSocketServer.serve_forever"><code class="xref py py-meth docutils literal notranslate"><span class="pre">serve_forever()</span></code></a>
instead of exiting a <a class="reference internal" href="server.html#websockets.legacy.server.serve" title="websockets.legacy.server.serve"><code class="xref py py-func docutils literal notranslate"><span class="pre">serve()</span></code></a> context.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServer.sockets">
<span class="sig-name descname"><span class="pre">sockets</span></span><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServer.sockets" title="Link to this definition">¶</a></dt>
<dd><p>See <a class="reference external" href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.Server.sockets" title="(in Python v3.13)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">asyncio.Server.sockets</span></code></a>.</p>
</dd></dl>

</dd></dl>

</section>
<section id="using-a-connection">
<h2>Using a connection<a class="headerlink" href="server.html#using-a-connection" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">websockets.legacy.server.</span></span><span class="sig-name descname"><span class="pre">WebSocketServerProtocol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ws_handler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ws_server</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extensions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subprotocols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Python/x.y.z</span> <span class="pre">websockets/X.Y'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">process_request</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">select_subprotocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">open_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ping_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ping_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2**20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_queue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2**5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2**16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2**16</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/server.py#L56-L646"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol" title="Link to this definition">¶</a></dt>
<dd><p>WebSocket server connection.</p>
<p><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol" title="websockets.legacy.server.WebSocketServerProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketServerProtocol</span></code></a> provides <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.recv" title="websockets.legacy.server.WebSocketServerProtocol.recv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">recv()</span></code></a> and <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.send" title="websockets.legacy.server.WebSocketServerProtocol.send"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send()</span></code></a>
coroutines for receiving and sending messages.</p>
<p>It supports asynchronous iteration to receive messages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">websocket</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">process</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
<p>The iterator exits normally when the connection is closed with close code
1000 (OK) or 1001 (going away) or without a close code. It raises
a <a class="reference internal" href="../exceptions.html#websockets.exceptions.ConnectionClosedError" title="websockets.exceptions.ConnectionClosedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ConnectionClosedError</span></code></a> when the connection
is closed with any other code.</p>
<p>You may customize the opening handshake in a subclass by
overriding <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.process_request" title="websockets.legacy.server.WebSocketServerProtocol.process_request"><code class="xref py py-meth docutils literal notranslate"><span class="pre">process_request()</span></code></a> or <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.select_subprotocol" title="websockets.legacy.server.WebSocketServerProtocol.select_subprotocol"><code class="xref py py-meth docutils literal notranslate"><span class="pre">select_subprotocol()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ws_server</strong> (<a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServer" title="websockets.legacy.server.WebSocketServer"><em>WebSocketServer</em></a>) – WebSocket server that created this connection.</p>
</dd>
</dl>
<p>See <a class="reference internal" href="server.html#websockets.legacy.server.serve" title="websockets.legacy.server.serve"><code class="xref py py-func docutils literal notranslate"><span class="pre">serve()</span></code></a> for the documentation of <code class="docutils literal notranslate"><span class="pre">ws_handler</span></code>, <code class="docutils literal notranslate"><span class="pre">logger</span></code>, <code class="docutils literal notranslate"><span class="pre">origins</span></code>,
<code class="docutils literal notranslate"><span class="pre">extensions</span></code>, <code class="docutils literal notranslate"><span class="pre">subprotocols</span></code>, <code class="docutils literal notranslate"><span class="pre">extra_headers</span></code>, and <code class="docutils literal notranslate"><span class="pre">server_header</span></code>.</p>
<p>See <a class="reference internal" href="common.html#websockets.legacy.protocol.WebSocketCommonProtocol" title="websockets.legacy.protocol.WebSocketCommonProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketCommonProtocol</span></code></a> for the
documentation of <code class="docutils literal notranslate"><span class="pre">ping_interval</span></code>, <code class="docutils literal notranslate"><span class="pre">ping_timeout</span></code>, <code class="docutils literal notranslate"><span class="pre">close_timeout</span></code>,
<code class="docutils literal notranslate"><span class="pre">max_size</span></code>, <code class="docutils literal notranslate"><span class="pre">max_queue</span></code>, <code class="docutils literal notranslate"><span class="pre">read_limit</span></code>, and <code class="docutils literal notranslate"><span class="pre">write_limit</span></code>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.recv">
<em class="property"><span class="pre">await</span> </em><span class="sig-name descname"><span class="pre">recv</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/protocol.py#L488-L564"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.recv" title="Link to this definition">¶</a></dt>
<dd><p>Receive the next message.</p>
<p>When the connection is closed, <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.recv" title="websockets.legacy.server.WebSocketServerProtocol.recv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">recv()</span></code></a> raises
<a class="reference internal" href="../exceptions.html#websockets.exceptions.ConnectionClosed" title="websockets.exceptions.ConnectionClosed"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ConnectionClosed</span></code></a>. Specifically, it raises
<a class="reference internal" href="../exceptions.html#websockets.exceptions.ConnectionClosedOK" title="websockets.exceptions.ConnectionClosedOK"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ConnectionClosedOK</span></code></a> after a normal
connection closure and
<a class="reference internal" href="../exceptions.html#websockets.exceptions.ConnectionClosedError" title="websockets.exceptions.ConnectionClosedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ConnectionClosedError</span></code></a> after a protocol
error or a network failure. This is how you detect the end of the
message stream.</p>
<p>Canceling <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.recv" title="websockets.legacy.server.WebSocketServerProtocol.recv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">recv()</span></code></a> is safe. There’s no risk of losing the next
message. The next invocation of <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.recv" title="websockets.legacy.server.WebSocketServerProtocol.recv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">recv()</span></code></a> will return it.</p>
<p>This makes it possible to enforce a timeout by wrapping <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.recv" title="websockets.legacy.server.WebSocketServerProtocol.recv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">recv()</span></code></a> in
<a class="reference external" href="https://docs.python.org/3/library/asyncio-task.html#asyncio.timeout" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">timeout()</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/asyncio-task.html#asyncio.wait_for" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">wait_for()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>A string (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) for a <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6455#section-5.6">Text</a> frame. A bytestring
(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>) for a <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6455#section-5.6">Binary</a> frame.</p>
</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="../exceptions.html#websockets.exceptions.ConnectionClosed" title="websockets.exceptions.ConnectionClosed"><strong>ConnectionClosed</strong></a> – When the connection is closed.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.13)"><strong>RuntimeError</strong></a> – If two coroutines call <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.recv" title="websockets.legacy.server.WebSocketServerProtocol.recv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">recv()</span></code></a> concurrently.</p></li>
</ul>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a> | <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)">bytes</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.send">
<em class="property"><span class="pre">await</span> </em><span class="sig-name descname"><span class="pre">send</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/protocol.py#L566-L723"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.send" title="Link to this definition">¶</a></dt>
<dd><p>Send a message.</p>
<p>A string (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) is sent as a <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6455#section-5.6">Text</a> frame. A bytestring or
bytes-like object (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytearray" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a>, or
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#memoryview" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">memoryview</span></code></a>) is sent as a <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6455#section-5.6">Binary</a> frame.</p>
<p><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.send" title="websockets.legacy.server.WebSocketServerProtocol.send"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send()</span></code></a> also accepts an iterable or an asynchronous iterable of
strings, bytestrings, or bytes-like objects to enable <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6455#section-5.4">fragmentation</a>.
Each item is treated as a message fragment and sent in its own frame.
All items must be of the same type, or else <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.send" title="websockets.legacy.server.WebSocketServerProtocol.send"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send()</span></code></a> will raise a
<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.13)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> and the connection will be closed.</p>
<p><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.send" title="websockets.legacy.server.WebSocketServerProtocol.send"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send()</span></code></a> rejects dict-like objects because this is often an error.
(If you want to send the keys of a dict-like object as fragments, call
its <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict.keys" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">keys()</span></code></a> method and pass the result to <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.send" title="websockets.legacy.server.WebSocketServerProtocol.send"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send()</span></code></a>.)</p>
<p>Canceling <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.send" title="websockets.legacy.server.WebSocketServerProtocol.send"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send()</span></code></a> is discouraged. Instead, you should close the
connection with <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.close" title="websockets.legacy.server.WebSocketServerProtocol.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a>. Indeed, there are only two situations
where <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.send" title="websockets.legacy.server.WebSocketServerProtocol.send"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send()</span></code></a> may yield control to the event loop and then get
canceled; in both cases, <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.close" title="websockets.legacy.server.WebSocketServerProtocol.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> has the same effect and is
more clear:</p>
<ol class="arabic simple">
<li><p>The write buffer is full. If you don’t want to wait until enough
data is sent, your only alternative is to close the connection.
<a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.close" title="websockets.legacy.server.WebSocketServerProtocol.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> will likely time out then abort the TCP connection.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">message</span></code> is an asynchronous iterator that yields control.
Stopping in the middle of a fragmented message will cause a
protocol error and the connection will be closed.</p></li>
</ol>
<p>When the connection is closed, <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.send" title="websockets.legacy.server.WebSocketServerProtocol.send"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send()</span></code></a> raises
<a class="reference internal" href="../exceptions.html#websockets.exceptions.ConnectionClosed" title="websockets.exceptions.ConnectionClosed"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ConnectionClosed</span></code></a>. Specifically, it
raises <a class="reference internal" href="../exceptions.html#websockets.exceptions.ConnectionClosedOK" title="websockets.exceptions.ConnectionClosedOK"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ConnectionClosedOK</span></code></a> after a normal
connection closure and
<a class="reference internal" href="../exceptions.html#websockets.exceptions.ConnectionClosedError" title="websockets.exceptions.ConnectionClosedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ConnectionClosedError</span></code></a> after a protocol
error or a network failure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>message</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><em>bytes</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.13)"><em>Iterable</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><em>bytes</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterable" title="(in Python v3.13)"><em>AsyncIterable</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><em>bytes</em></a><em>]</em>) – Message to send.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="../exceptions.html#websockets.exceptions.ConnectionClosed" title="websockets.exceptions.ConnectionClosed"><strong>ConnectionClosed</strong></a> – When the connection is closed.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.13)"><strong>TypeError</strong></a> – If <code class="docutils literal notranslate"><span class="pre">message</span></code> doesn’t have a supported type.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.close">
<em class="property"><span class="pre">await</span> </em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">CloseCode.NORMAL_CLOSURE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/protocol.py#L725-L778"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.close" title="Link to this definition">¶</a></dt>
<dd><p>Perform the closing handshake.</p>
<p><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.close" title="websockets.legacy.server.WebSocketServerProtocol.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> waits for the other end to complete the handshake and
for the TCP connection to terminate. As a consequence, there’s no need
to await <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.wait_closed" title="websockets.legacy.server.WebSocketServerProtocol.wait_closed"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wait_closed()</span></code></a> after <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.close" title="websockets.legacy.server.WebSocketServerProtocol.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a>.</p>
<p><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.close" title="websockets.legacy.server.WebSocketServerProtocol.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> is idempotent: it doesn’t do anything once the
connection is closed.</p>
<p>Wrapping <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.close" title="websockets.legacy.server.WebSocketServerProtocol.close"><code class="xref py py-func docutils literal notranslate"><span class="pre">close()</span></code></a> in <a class="reference external" href="https://docs.python.org/3/library/asyncio-task.html#asyncio.create_task" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_task()</span></code></a> is safe, given
that errors during connection termination aren’t particularly useful.</p>
<p>Canceling <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.close" title="websockets.legacy.server.WebSocketServerProtocol.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> is discouraged. If it takes too long, you can
set a shorter <code class="docutils literal notranslate"><span class="pre">close_timeout</span></code>. If you don’t want to wait, let the
Python process exit, then the OS will take care of closing the TCP
connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – WebSocket close code.</p></li>
<li><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – WebSocket close reason.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.wait_closed">
<em class="property"><span class="pre">await</span> </em><span class="sig-name descname"><span class="pre">wait_closed</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/protocol.py#L780-L791"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.wait_closed" title="Link to this definition">¶</a></dt>
<dd><p>Wait until the connection is closed.</p>
<p>This coroutine is identical to the <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.closed" title="websockets.legacy.server.WebSocketServerProtocol.closed"><code class="xref py py-attr docutils literal notranslate"><span class="pre">closed</span></code></a> attribute, except it
can be awaited.</p>
<p>This can make it easier to detect connection termination, regardless
of its cause, in tasks that interact with the WebSocket connection.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.ping">
<em class="property"><span class="pre">await</span> </em><span class="sig-name descname"><span class="pre">ping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/protocol.py#L793-L850"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.ping" title="Link to this definition">¶</a></dt>
<dd><p>Send a <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6455#section-5.5.2">Ping</a>.</p>
<p>A ping may serve as a keepalive, as a check that the remote endpoint
received all messages up to this point, or to measure <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.latency" title="websockets.legacy.server.WebSocketServerProtocol.latency"><code class="xref py py-attr docutils literal notranslate"><span class="pre">latency</span></code></a>.</p>
<p>Canceling <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.ping" title="websockets.legacy.server.WebSocketServerProtocol.ping"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ping()</span></code></a> is discouraged. If <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.ping" title="websockets.legacy.server.WebSocketServerProtocol.ping"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ping()</span></code></a> doesn’t return
immediately, it means the write buffer is full. If you don’t want to
wait, you should close the connection.</p>
<p>Canceling the <a class="reference external" href="https://docs.python.org/3/library/asyncio-future.html#asyncio.Future" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Future</span></code></a> returned by <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.ping" title="websockets.legacy.server.WebSocketServerProtocol.ping"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ping()</span></code></a> has no
effect.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><em>bytes</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – Payload of the ping. A string will be encoded to UTF-8.
If <code class="docutils literal notranslate"><span class="pre">data</span></code> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, the payload is four random bytes.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>A future that will be completed when the corresponding pong is
received. You can ignore it if you don’t intend to wait. The result
of the future is the latency of the connection in seconds.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pong_waiter</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="o">.</span><span class="n">ping</span><span class="p">()</span>
<span class="c1"># only if you want to wait for the corresponding pong</span>
<span class="n">latency</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pong_waiter</span>
</pre></div>
</div>
</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="../exceptions.html#websockets.exceptions.ConnectionClosed" title="websockets.exceptions.ConnectionClosed"><strong>ConnectionClosed</strong></a> – When the connection is closed.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.13)"><strong>RuntimeError</strong></a> – If another ping was sent with the same data and
    the corresponding pong wasn’t received yet.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable" title="(in Python v3.13)"><em>Awaitable</em></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)">float</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.pong">
<em class="property"><span class="pre">await</span> </em><span class="sig-name descname"><span class="pre">pong</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">b''</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/protocol.py#L852-L875"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.pong" title="Link to this definition">¶</a></dt>
<dd><p>Send a <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6455#section-5.5.3">Pong</a>.</p>
<p>An unsolicited pong may serve as a unidirectional heartbeat.</p>
<p>Canceling <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.pong" title="websockets.legacy.server.WebSocketServerProtocol.pong"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pong()</span></code></a> is discouraged. If <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.pong" title="websockets.legacy.server.WebSocketServerProtocol.pong"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pong()</span></code></a> doesn’t return
immediately, it means the write buffer is full. If you don’t want to
wait, you should close the connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><em>bytes</em></a>) – Payload of the pong. A string will be encoded to UTF-8.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../exceptions.html#websockets.exceptions.ConnectionClosed" title="websockets.exceptions.ConnectionClosed"><strong>ConnectionClosed</strong></a> – When the connection is closed.</p>
</dd>
</dl>
</dd></dl>

<p>You can customize the opening handshake in a subclass by overriding these methods:</p>
<dl class="py method">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.process_request">
<em class="property"><span class="pre">await</span> </em><span class="sig-name descname"><span class="pre">process_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request_headers</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/server.py#L322-L369"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.process_request" title="Link to this definition">¶</a></dt>
<dd><p>Intercept the HTTP request and return an HTTP response if appropriate.</p>
<p>You may override this method in a <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol" title="websockets.legacy.server.WebSocketServerProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketServerProtocol</span></code></a>
subclass, for example:</p>
<ul class="simple">
<li><p>to return an HTTP 200 OK response on a given path; then a load
balancer can use this path for a health check;</p></li>
<li><p>to authenticate the request and return an HTTP 401 Unauthorized or an
HTTP 403 Forbidden when authentication fails.</p></li>
</ul>
<p>You may also override this method with the <code class="docutils literal notranslate"><span class="pre">process_request</span></code>
argument of <a class="reference internal" href="server.html#websockets.legacy.server.serve" title="websockets.legacy.server.serve"><code class="xref py py-func docutils literal notranslate"><span class="pre">serve()</span></code></a> and <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol" title="websockets.legacy.server.WebSocketServerProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketServerProtocol</span></code></a>. This
is equivalent, except <code class="docutils literal notranslate"><span class="pre">process_request</span></code> won’t have access to the
protocol instance, so it can’t store information for later use.</p>
<p><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.process_request" title="websockets.legacy.server.WebSocketServerProtocol.process_request"><code class="xref py py-meth docutils literal notranslate"><span class="pre">process_request()</span></code></a> is expected to complete quickly. If it may run
for a long time, then it should await <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.wait_closed" title="websockets.legacy.server.WebSocketServerProtocol.wait_closed"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wait_closed()</span></code></a> and exit if
<a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.wait_closed" title="websockets.legacy.server.WebSocketServerProtocol.wait_closed"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wait_closed()</span></code></a> completes, or else it could prevent the server
from shutting down.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Request path, including optional query string.</p></li>
<li><p><strong>request_headers</strong> (<a class="reference internal" href="../datastructures.html#websockets.datastructures.Headers" title="websockets.datastructures.Headers"><em>Headers</em></a>) – Request headers.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> to
continue the WebSocket handshake normally.</p>
<p>An HTTP response, represented by a 3-uple of the response status,
headers, and body, to abort the WebSocket handshake and return
that HTTP response instead.</p>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)">tuple</a>[<a class="reference internal" href="../types.html#websockets.typing.StatusLike" title="websockets.typing.StatusLike">StatusLike</a>, <a class="reference internal" href="../types.html#websockets.datastructures.HeadersLike" title="websockets.datastructures.HeadersLike">HeadersLike</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)">bytes</a>] | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.select_subprotocol">
<span class="sig-name descname"><span class="pre">select_subprotocol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_subprotocols</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_subprotocols</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/server.py#L514-L552"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.select_subprotocol" title="Link to this definition">¶</a></dt>
<dd><p>Pick a subprotocol among those supported by the client and the server.</p>
<p>If several subprotocols are available, select the preferred subprotocol
by giving equal weight to the preferences of the client and the server.</p>
<p>If no subprotocol is available, proceed without a subprotocol.</p>
<p>You may provide a <code class="docutils literal notranslate"><span class="pre">select_subprotocol</span></code> argument to <a class="reference internal" href="server.html#websockets.legacy.server.serve" title="websockets.legacy.server.serve"><code class="xref py py-func docutils literal notranslate"><span class="pre">serve()</span></code></a> or
<a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol" title="websockets.legacy.server.WebSocketServerProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketServerProtocol</span></code></a> to override this logic. For example,
you could reject the handshake if the client doesn’t support a
particular subprotocol, rather than accept the handshake without that
subprotocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client_subprotocols</strong> (<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.13)"><em>Sequence</em></a><em>[</em><a class="reference internal" href="../types.html#websockets.typing.Subprotocol" title="websockets.typing.Subprotocol"><em>Subprotocol</em></a><em>]</em>) – List of subprotocols offered by the client.</p></li>
<li><p><strong>server_subprotocols</strong> (<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.13)"><em>Sequence</em></a><em>[</em><a class="reference internal" href="../types.html#websockets.typing.Subprotocol" title="websockets.typing.Subprotocol"><em>Subprotocol</em></a><em>]</em>) – List of subprotocols available on the server.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Selected subprotocol, if a common subprotocol was found.</p>
<p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> to continue without a subprotocol.</p>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../types.html#websockets.typing.Subprotocol" title="websockets.typing.Subprotocol"><em>Subprotocol</em></a> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)">None</a></p>
</dd>
</dl>
</dd></dl>

<p>WebSocket connection objects also provide these attributes:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.id">
<span class="sig-name descname"><span class="pre">id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/uuid.html#uuid.UUID" title="(in Python v3.13)"><span class="pre">uuid.UUID</span></a></em><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.id" title="Link to this definition">¶</a></dt>
<dd><p>Unique identifier of the connection. Useful in logs.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.logger">
<span class="sig-name descname"><span class="pre">logger</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../types.html#websockets.typing.LoggerLike" title="websockets.typing.LoggerLike"><span class="pre">LoggerLike</span></a></em><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.logger" title="Link to this definition">¶</a></dt>
<dd><p>Logger for this connection.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.local_address">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">local_address</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></em><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.local_address" title="Link to this definition">¶</a></dt>
<dd><p>Local address of the connection.</p>
<p>For IPv4 connections, this is a <code class="docutils literal notranslate"><span class="pre">(host,</span> <span class="pre">port)</span></code> tuple.</p>
<p>The format of the address depends on the address family;
see <a class="reference external" href="https://docs.python.org/3/library/socket.html#socket.socket.getsockname" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getsockname()</span></code></a>.</p>
<p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> if the TCP connection isn’t established yet.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.remote_address">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remote_address</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></em><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.remote_address" title="Link to this definition">¶</a></dt>
<dd><p>Remote address of the connection.</p>
<p>For IPv4 connections, this is a <code class="docutils literal notranslate"><span class="pre">(host,</span> <span class="pre">port)</span></code> tuple.</p>
<p>The format of the address depends on the address family;
see <a class="reference external" href="https://docs.python.org/3/library/socket.html#socket.socket.getpeername" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getpeername()</span></code></a>.</p>
<p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> if the TCP connection isn’t established yet.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.open">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">open</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></em><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.open" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> when the connection is open; <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> otherwise.</p>
<p>This attribute may be used to detect disconnections. However, this
approach is discouraged per the <a class="reference external" href="https://docs.python.org/3/glossary.html#term-eafp">EAFP</a> principle. Instead, you should
handle <a class="reference internal" href="../exceptions.html#websockets.exceptions.ConnectionClosed" title="websockets.exceptions.ConnectionClosed"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ConnectionClosed</span></code></a> exceptions.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.closed">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">closed</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></em><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.closed" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> when the connection is closed; <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> otherwise.</p>
<p>Be aware that both <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.open" title="websockets.legacy.server.WebSocketServerProtocol.open"><code class="xref py py-attr docutils literal notranslate"><span class="pre">open</span></code></a> and <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.closed" title="websockets.legacy.server.WebSocketServerProtocol.closed"><code class="xref py py-attr docutils literal notranslate"><span class="pre">closed</span></code></a> are <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>
during the opening and closing sequences.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.latency">
<span class="sig-name descname"><span class="pre">latency</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></em><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.latency" title="Link to this definition">¶</a></dt>
<dd><p>Latency of the connection, in seconds.</p>
<p>Latency is defined as the round-trip time of the connection. It is
measured by sending a Ping frame and waiting for a matching Pong frame.
Before the first measurement, <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.latency" title="websockets.legacy.server.WebSocketServerProtocol.latency"><code class="xref py py-attr docutils literal notranslate"><span class="pre">latency</span></code></a> is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>By default, websockets enables a <a class="reference internal" href="../../topics/keepalive.html#keepalive"><span class="std std-ref">keepalive</span></a> mechanism
that sends Ping frames automatically at regular intervals. You can also
send Ping frames and measure latency with <a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.ping" title="websockets.legacy.server.WebSocketServerProtocol.ping"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ping()</span></code></a>.</p>
</dd></dl>

<p>The following attributes are available after the opening handshake,
once the WebSocket connection is open:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.path">
<span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.path" title="Link to this definition">¶</a></dt>
<dd><p>Path of the opening handshake request.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.request_headers">
<span class="sig-name descname"><span class="pre">request_headers</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../datastructures.html#websockets.datastructures.Headers" title="websockets.datastructures.Headers"><span class="pre">Headers</span></a></em><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.request_headers" title="Link to this definition">¶</a></dt>
<dd><p>Opening handshake request headers.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.response_headers">
<span class="sig-name descname"><span class="pre">response_headers</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../datastructures.html#websockets.datastructures.Headers" title="websockets.datastructures.Headers"><span class="pre">Headers</span></a></em><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.response_headers" title="Link to this definition">¶</a></dt>
<dd><p>Opening handshake response headers.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.subprotocol">
<span class="sig-name descname"><span class="pre">subprotocol</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../types.html#websockets.typing.Subprotocol" title="websockets.typing.Subprotocol"><span class="pre">Subprotocol</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.subprotocol" title="Link to this definition">¶</a></dt>
<dd><p>Subprotocol, if one was negotiated.</p>
</dd></dl>

<p>The following attributes are available after the closing handshake,
once the WebSocket connection is closed:</p>
<dl class="py property">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.close_code">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close_code</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.close_code" title="Link to this definition">¶</a></dt>
<dd><p>WebSocket close code, defined in <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.5">section 7.1.5 of RFC 6455</a>.</p>
<p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> if the connection isn’t closed yet.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="websockets.legacy.server.WebSocketServerProtocol.close_reason">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close_reason</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><a class="headerlink" href="server.html#websockets.legacy.server.WebSocketServerProtocol.close_reason" title="Link to this definition">¶</a></dt>
<dd><p>WebSocket close reason, defined in <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6455#section-7.1.6">section 7.1.6 of RFC 6455</a>.</p>
<p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> if the connection isn’t closed yet.</p>
</dd></dl>

</dd></dl>

</section>
<section id="broadcast">
<h2>Broadcast<a class="headerlink" href="server.html#broadcast" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="websockets.legacy.server.broadcast">
<span class="sig-prename descclassname"><span class="pre">websockets.legacy.server.</span></span><span class="sig-name descname"><span class="pre">broadcast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">websockets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raise_exceptions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/protocol.py#L1545-L1637"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.server.broadcast" title="Link to this definition">¶</a></dt>
<dd><p>Broadcast a message to several WebSocket connections.</p>
<p>A string (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) is sent as a <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6455#section-5.6">Text</a> frame. A bytestring or bytes-like
object (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytearray" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a>, or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#memoryview" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">memoryview</span></code></a>) is sent
as a <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6455#section-5.6">Binary</a> frame.</p>
<p><a class="reference internal" href="server.html#websockets.legacy.server.broadcast" title="websockets.legacy.server.broadcast"><code class="xref py py-func docutils literal notranslate"><span class="pre">broadcast()</span></code></a> pushes the message synchronously to all connections even
if their write buffers are overflowing. There’s no backpressure.</p>
<p>If you broadcast messages faster than a connection can handle them, messages
will pile up in its write buffer until the connection times out. Keep
<code class="docutils literal notranslate"><span class="pre">ping_interval</span></code> and <code class="docutils literal notranslate"><span class="pre">ping_timeout</span></code> low to prevent excessive memory usage
from slow connections.</p>
<p>Unlike <a class="reference internal" href="common.html#websockets.legacy.protocol.WebSocketCommonProtocol.send" title="websockets.legacy.protocol.WebSocketCommonProtocol.send"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send()</span></code></a>,
<a class="reference internal" href="server.html#websockets.legacy.server.broadcast" title="websockets.legacy.server.broadcast"><code class="xref py py-func docutils literal notranslate"><span class="pre">broadcast()</span></code></a> doesn’t support sending fragmented messages. Indeed,
fragmentation is useful for sending large messages without buffering them in
memory, while <a class="reference internal" href="server.html#websockets.legacy.server.broadcast" title="websockets.legacy.server.broadcast"><code class="xref py py-func docutils literal notranslate"><span class="pre">broadcast()</span></code></a> buffers one copy per connection as fast as
possible.</p>
<p><a class="reference internal" href="server.html#websockets.legacy.server.broadcast" title="websockets.legacy.server.broadcast"><code class="xref py py-func docutils literal notranslate"><span class="pre">broadcast()</span></code></a> skips connections that aren’t open in order to avoid
errors on connections where the closing handshake is in progress.</p>
<p><a class="reference internal" href="server.html#websockets.legacy.server.broadcast" title="websockets.legacy.server.broadcast"><code class="xref py py-func docutils literal notranslate"><span class="pre">broadcast()</span></code></a> ignores failures to write the message on some connections.
It continues writing to other connections. On Python 3.11 and above, you may
set <code class="docutils literal notranslate"><span class="pre">raise_exceptions</span></code> to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> to record failures and raise all
exceptions in a <span class="target" id="index-0"></span><a class="pep reference external" href="https://peps.python.org/pep-0654/"><strong>PEP 654</strong></a> <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ExceptionGroup" title="(in Python v3.13)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ExceptionGroup</span></code></a>.</p>
<p>While <a class="reference internal" href="server.html#websockets.legacy.server.broadcast" title="websockets.legacy.server.broadcast"><code class="xref py py-func docutils literal notranslate"><span class="pre">broadcast()</span></code></a> makes more sense for servers, it works identically
with clients, if you have a use case for opening connections to many servers
and broadcasting a message to them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>websockets</strong> (<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.13)"><em>Iterable</em></a><em>[</em><a class="reference internal" href="common.html#websockets.legacy.protocol.WebSocketCommonProtocol" title="websockets.legacy.protocol.WebSocketCommonProtocol"><em>WebSocketCommonProtocol</em></a><em>]</em>) – WebSocket connections to which the message will be sent.</p></li>
<li><p><strong>message</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><em>bytes</em></a>) – Message to send.</p></li>
<li><p><strong>raise_exceptions</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Whether to raise an exception in case of failures.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.13)"><strong>TypeError</strong></a> – If <code class="docutils literal notranslate"><span class="pre">message</span></code> doesn’t have a supported type.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-websockets.legacy.auth">
<span id="basic-authentication"></span><h2>Basic authentication<a class="headerlink" href="server.html#module-websockets.legacy.auth" title="Link to this heading">¶</a></h2>
<p>websockets supports HTTP Basic Authentication according to
<span class="target" id="index-1"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7235.html"><strong>RFC 7235</strong></a> and <span class="target" id="index-2"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7617.html"><strong>RFC 7617</strong></a>.</p>
<dl class="py function">
<dt class="sig sig-object py" id="websockets.legacy.auth.basic_auth_protocol_factory">
<span class="sig-prename descclassname"><span class="pre">websockets.legacy.auth.</span></span><span class="sig-name descname"><span class="pre">basic_auth_protocol_factory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">realm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">credentials</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_credentials</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/auth.py#L118-L190"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.auth.basic_auth_protocol_factory" title="Link to this definition">¶</a></dt>
<dd><p>Protocol factory that enforces HTTP Basic Auth.</p>
<p><a class="reference internal" href="server.html#websockets.legacy.auth.basic_auth_protocol_factory" title="websockets.legacy.auth.basic_auth_protocol_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">basic_auth_protocol_factory()</span></code></a> is designed to integrate with
<a class="reference internal" href="server.html#websockets.legacy.server.serve" title="websockets.legacy.server.serve"><code class="xref py py-func docutils literal notranslate"><span class="pre">serve()</span></code></a> like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">serve</span><span class="p">(</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="n">create_protocol</span><span class="o">=</span><span class="n">basic_auth_protocol_factory</span><span class="p">(</span>
        <span class="n">realm</span><span class="o">=</span><span class="s2">&quot;my dev server&quot;</span><span class="p">,</span>
        <span class="n">credentials</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="s2">&quot;iloveyou&quot;</span><span class="p">),</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>realm</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – Scope of protection. It should contain only ASCII characters
because the encoding of non-ASCII characters is undefined.
Refer to section 2.2 of <span class="target" id="index-3"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7235.html"><strong>RFC 7235</strong></a> for details.</p></li>
<li><p><strong>credentials</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.13)"><em>Iterable</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – Hard coded authorized credentials. It can be a
<code class="docutils literal notranslate"><span class="pre">(username,</span> <span class="pre">password)</span></code> pair or a list of such pairs.</p></li>
<li><p><strong>check_credentials</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable" title="(in Python v3.13)"><em>Awaitable</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>]</em><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – Coroutine that verifies credentials.
It receives <code class="docutils literal notranslate"><span class="pre">username</span></code> and <code class="docutils literal notranslate"><span class="pre">password</span></code> arguments
and returns a <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>. One of <code class="docutils literal notranslate"><span class="pre">credentials</span></code> or
<code class="docutils literal notranslate"><span class="pre">check_credentials</span></code> must be provided but not both.</p></li>
<li><p><strong>create_protocol</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><em>Callable</em></a><em>[</em><em>[</em><em>...</em><em>]</em><em>, </em><a class="reference internal" href="server.html#websockets.legacy.auth.BasicAuthWebSocketServerProtocol" title="websockets.legacy.auth.BasicAuthWebSocketServerProtocol"><em>BasicAuthWebSocketServerProtocol</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><em>None</em></a>) – Factory that creates the protocol. By default, this
is <a class="reference internal" href="server.html#websockets.legacy.auth.BasicAuthWebSocketServerProtocol" title="websockets.legacy.auth.BasicAuthWebSocketServerProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">BasicAuthWebSocketServerProtocol</span></code></a>. It can be replaced
by a subclass.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.13)"><strong>TypeError</strong></a> – If the <code class="docutils literal notranslate"><span class="pre">credentials</span></code> or <code class="docutils literal notranslate"><span class="pre">check_credentials</span></code> argument is
    wrong.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="websockets.legacy.auth.BasicAuthWebSocketServerProtocol">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">websockets.legacy.auth.</span></span><span class="sig-name descname"><span class="pre">BasicAuthWebSocketServerProtocol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">realm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_credentials</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/auth.py#L29-L115"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.auth.BasicAuthWebSocketServerProtocol" title="Link to this definition">¶</a></dt>
<dd><p>WebSocket server protocol that enforces HTTP Basic Auth.</p>
<dl class="field-list simple">
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="websockets.legacy.auth.BasicAuthWebSocketServerProtocol.realm">
<span class="sig-name descname"><span class="pre">realm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="server.html#websockets.legacy.auth.BasicAuthWebSocketServerProtocol.realm" title="Link to this definition">¶</a></dt>
<dd><p>Scope of protection.</p>
<p>If provided, it should contain only ASCII characters because the
encoding of non-ASCII characters is undefined.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="websockets.legacy.auth.BasicAuthWebSocketServerProtocol.username">
<span class="sig-name descname"><span class="pre">username</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="server.html#websockets.legacy.auth.BasicAuthWebSocketServerProtocol.username" title="Link to this definition">¶</a></dt>
<dd><p>Username of the authenticated user.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="websockets.legacy.auth.BasicAuthWebSocketServerProtocol.check_credentials">
<em class="property"><span class="pre">await</span> </em><span class="sig-name descname"><span class="pre">check_credentials</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">username</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-websockets/websockets/blob/14.1/src/websockets/legacy/auth.py#L58-L77"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="server.html#websockets.legacy.auth.BasicAuthWebSocketServerProtocol.check_credentials" title="Link to this definition">¶</a></dt>
<dd><p>Check whether credentials are authorized.</p>
<p>This coroutine may be overridden in a subclass, for example to
authenticate against a database or an external service.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>username</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – HTTP Basic Auth username.</p></li>
<li><p><strong>password</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – HTTP Basic Auth password.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> if the handshake should continue;
<a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> if it should fail with an HTTP 401 error.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)">bool</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="client.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Client (legacy <code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code>)</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../sansio/client.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Client (Sans-I/O)</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2013-2024, Aymeric Augustin and contributors
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="server.html#">Server (legacy <code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code>)</a><ul>
<li><a class="reference internal" href="server.html#starting-a-server">Starting a server</a><ul>
<li><a class="reference internal" href="server.html#websockets.legacy.server.serve"><code class="docutils literal notranslate"><span class="pre">serve()</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.unix_serve"><code class="docutils literal notranslate"><span class="pre">unix_serve()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="server.html#stopping-a-server">Stopping a server</a><ul>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServer"><code class="docutils literal notranslate"><span class="pre">WebSocketServer</span></code></a><ul>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServer.close"><code class="docutils literal notranslate"><span class="pre">WebSocketServer.close()</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServer.wait_closed"><code class="docutils literal notranslate"><span class="pre">WebSocketServer.wait_closed()</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServer.get_loop"><code class="docutils literal notranslate"><span class="pre">WebSocketServer.get_loop()</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServer.is_serving"><code class="docutils literal notranslate"><span class="pre">WebSocketServer.is_serving()</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServer.start_serving"><code class="docutils literal notranslate"><span class="pre">WebSocketServer.start_serving()</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServer.serve_forever"><code class="docutils literal notranslate"><span class="pre">WebSocketServer.serve_forever()</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServer.sockets"><code class="docutils literal notranslate"><span class="pre">WebSocketServer.sockets</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="server.html#using-a-connection">Using a connection</a><ul>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol</span></code></a><ul>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.recv"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.recv()</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.send"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.send()</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.close"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.close()</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.wait_closed"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.wait_closed()</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.ping"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.ping()</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.pong"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.pong()</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.process_request"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.process_request()</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.select_subprotocol"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.select_subprotocol()</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.id"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.id</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.logger"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.logger</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.local_address"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.local_address</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.remote_address"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.remote_address</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.open"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.open</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.closed"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.closed</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.latency"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.latency</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.path"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.path</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.request_headers"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.request_headers</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.response_headers"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.response_headers</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.subprotocol"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.subprotocol</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.close_code"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.close_code</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.server.WebSocketServerProtocol.close_reason"><code class="docutils literal notranslate"><span class="pre">WebSocketServerProtocol.close_reason</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="server.html#broadcast">Broadcast</a><ul>
<li><a class="reference internal" href="server.html#websockets.legacy.server.broadcast"><code class="docutils literal notranslate"><span class="pre">broadcast()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="server.html#module-websockets.legacy.auth">Basic authentication</a><ul>
<li><a class="reference internal" href="server.html#websockets.legacy.auth.basic_auth_protocol_factory"><code class="docutils literal notranslate"><span class="pre">basic_auth_protocol_factory()</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.auth.BasicAuthWebSocketServerProtocol"><code class="docutils literal notranslate"><span class="pre">BasicAuthWebSocketServerProtocol</span></code></a><ul>
<li><a class="reference internal" href="server.html#websockets.legacy.auth.BasicAuthWebSocketServerProtocol.realm"><code class="docutils literal notranslate"><span class="pre">BasicAuthWebSocketServerProtocol.realm</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.auth.BasicAuthWebSocketServerProtocol.username"><code class="docutils literal notranslate"><span class="pre">BasicAuthWebSocketServerProtocol.username</span></code></a></li>
<li><a class="reference internal" href="server.html#websockets.legacy.auth.BasicAuthWebSocketServerProtocol.check_credentials"><code class="docutils literal notranslate"><span class="pre">BasicAuthWebSocketServerProtocol.check_credentials()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js%3Fv=03fa008d"></script>
    <script src="../../_static/doctools.js%3Fv=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js%3Fv=dc90522c"></script>
    <script src="../../_static/scripts/furo.js%3Fv=5fa4622c"></script>
    <script src="../../_static/clipboard.min.js%3Fv=a7894cd8"></script>
    <script src="../../_static/copybutton.js%3Fv=f281be69"></script>
    <script src="../../_static/tabs.js%3Fv=3ee01567"></script>
    </body>
</html>